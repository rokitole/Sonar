var validation={valid:undefined,result:function(){validation.valid=true;var b=$("h2[dataset]").html();var a=$("[dataset][relation=url]").html();validation.check.blankinput(b,a);validation.check.semicolon();validation.check.htmltags();if(mode.state.adding){validation.check.duplicate(b,a)}return validation.valid},check:{blankinput:function(b,a){if((b==$("h2[dataset]").attr("default"))||(b=="")||(a=="")){validation.valid=false;gui.notify.warning()}},duplicate:function(b,a){$.ajax({type:"POST",url:"build/handler/handle.duplicates.php",data:{name:b,url:a},success:function(c){if(c!="unique"){validation.valid=false;gui.notify.duplicate()}},async:false})},semicolon:function(){$.each($("[dataset]"),function(a,b){if($(this).text().indexOf(";")>=0){validation.valid=false;gui.notify.warning()}})},htmltags:function(){$.each($("[dataset]"),function(a,b){if($(this).html().match(/<(?!br|\/br).*?>/)){validation.valid=false;gui.notify.syntax()}})}}};