var mode={project:undefined,state:{adding:false,editing:false,deleting:false},adding:function(){mode.project=0;mode.state.adding=true;gui.controls.use("save,cancel");$(".column.right").addClass("modal");mode.createblank()},editing:function(){mode.project=$(".column.middle li.selected").attr("project");mode.state.editing=true;gui.controls.use("save,delete,cancel");mode.enableinputs()},enableinputs:function(){$("[dataset]").attr("contenteditable","true");$(".column.right").addClass("modal")},disableinputs:function(){$("[dataset]").attr("contenteditable","false");$(".modal").removeClass("modal")},createblank:function(){$(".selected").removeClass("selected");detail.view()},reload:function(){mode.disableinputs();detail.view(mode.project);listing.offset=$(".middle").scrollTop();menu.filter($(".filtered"))},cancel:function(){if($("button.delete").hasClass("confirm")){update.disable.cancel()}else{mode.quit()}},abort:function(){if(mode.state.editing||mode.state.adding){update.disable.cancel();mode.quit()}},quit:function(){mode.disableinputs();if(!mode.state.deleting){mode.reload()}else{$(".right section *").remove()}if(mode.state.adding){if(mode.project!=0){gui.controls.use("add,edit")}else{gui.controls.use("add")}}if(mode.state.editing){gui.controls.use("add,edit")}if(mode.state.deleting){gui.controls.use("add")}mode.state.editing=false;mode.state.adding=false;mode.state.deleting=false}};