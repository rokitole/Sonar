var listing={offset:0,rescroll:function(){$(".middle").scrollTop(listing.offset)},clear:function(){$(".middle [meta]").remove();$(".middle ul li").remove();$(".middle ul").removeClass("show")},reselect:function(a){$("[project="+a+"]").addClass("selected")},meta:function(b){var c,a;b.count=="1"?c="Ergebnis":c="Ergebnisse";a=b.count+" "+c;$(".middle ul").before('<div meta><div class="box"><span contenteditable slug="'+a+'">'+a+'</span><i class="icon search use fa fa-search" title="Ergebnis durchsuchen"></i><i class="icon reveal fa fa-times" title="Suche beenden"></i></div></div>')},draw:function(a){$(".middle ul").append(a.listing);gui.tween(".middle ul");gui.progress.hide()},ping:function(){$(".middle .ping").each(function(){var a=$(this).attr("panel");var b=$(this).children().attr("href");ping.call(a,b)})},select:function(a){$(".selected").removeClass("selected");a.addClass("selected");detail.view(a.attr("project"));gui.controls.use("add,edit")},request:function(a,b){$.ajax({type:"POST",url:"build/handler/handle.listing.php",dataType:"json",cache:false,data:{table:a,ident:b},success:function(c){listing.meta(c);listing.draw(c);listing.ping();listing.reselect(mode.project);listing.rescroll()},async:true})},update:function(a,b){gui.progress.show();listing.clear();listing.request(a,b)},search:{go:function(){$(".fault").removeClass("fault");var a=$("[meta]").text();if(a!=""){$.each($(".middle li"),function(b,c){if(!($(this).text().indexOf(a)>=0)){$(this).addClass("fault")}})}},focus:function(){if($("[meta] span").text()==$("[meta] span").attr("slug")){$("[meta] span").html("")}$("[meta] span").focus();$("[meta]").addClass("active");$("[meta] .icon").removeClass("use");$("[meta] .icon.reveal").addClass("use")},reveal:function(){$(".middle li").removeClass("fault");$("[meta] span").text($("[meta] span").attr("slug"));$("[meta]").removeClass("active");$("[meta] .icon").removeClass("use");$("[meta] .icon.search").addClass("use")}}};